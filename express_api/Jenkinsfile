pipeline {
    agent none
    options {
        skipDefaultCheckout()
        disableConcurrentBuilds()
    }

    stages {
        stage('docker-build') {
            agent any

            steps {
                dir("$workspace/express_api") {
                    checkout scm
                    sh 'pwd'
                    sh 'make build'
                    archiveArtifacts artifacts: 'docker-tag.txt', onlyIfSuccessful: true
                }
            }
        }
    }
}

