pipeline {
    agent any

    stages {
        stage('docker-build') {
            steps {
                // Change working directory to the subdirectory 'express_api'
                dir('express_api') {
                    // Run commands inside the 'express_api' directory
                    checkout scm
                    sh 'pwd'
                    sh 'make build'
                }
                // Continue running steps in the original working directory
                sh 'echo "Back to the original working directory"'
            }
        }
    }

    post {
        always {
            // Archive artifacts, etc.
            archiveArtifacts artifacts: 'docker-tag.txt', onlyIfSuccessful: true
        }
    }
}

